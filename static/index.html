<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Flight Info</title>
  </head>
  <body>
    <link rel="stylesheet" href="/css/style.css">

    <h1>åˆ°ç€ä¾¿ä¸€è¦§</h1>
    <table border="1" id="flightTable">
        <thead>
            <tr>
                <th>é‹è¡ŒçŠ¶æ³</th><th>åˆ°ç€æ™‚åˆ»</th><th>å‡ºç™ºåœ°</th><th>æ©Ÿç¨®</th><th>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</th>
            </tr>
        </thead>
        <tbody>
            <!-- ãƒ‡ãƒ¼ã‚¿è¡ŒãŒã“ã“ã«å…¥ã‚‹ -->
        </tbody>
    </table>

    <script>
        async function fetchFlights() {
            const res = await fetch('/api/flights');
            const flights = await res.json();

            const tbody = document.querySelector('#flightTable tbody');
            tbody.innerHTML = ''; // ã‚¯ãƒªã‚¢

            flights.forEach(flight => {
              const tr = document.createElement('tr');

              const td1 = document.createElement('td');
              td1.textContent = flight.flight_status;

              // ğŸ”½ å€¤ã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’è¨­å®š
              switch (flight.flight_status) {
                case "é…å»¶":
                  td1.style.backgroundColor = "#fcccbe"; // è–„ç´…è‰²
                  break;
                case "æ‰‹è·ç‰©å¼•æ¸¡ä¸­":
                  td1.style.backgroundColor = "#ffff00"; // é»„è‰²
                  break;
                case "åˆ°ç€":
                  td1.style.backgroundColor = "#00ff00"; // ç·‘
                  break;
                case "æ¬ èˆª":
                  td1.style.backgroundColor = "#ff0000"; // èµ¤
                  break;
                default:
                  td1.style.backgroundColor = "#ffffff"; // ç™½
              }

              const td2 = document.createElement('td');
              td2.textContent = flight.arrival_time;

              const td3 = document.createElement('td');
              td3.textContent = flight.place_of_departure;

              const td4 = document.createElement('td');
              td4.textContent = flight.aircraft_code;

              const td5 = document.createElement('td');
              td5.textContent = flight.terminal;
              td5.style.textAlign = "center"; // ä¸­å¤®æƒãˆ

              // ğŸ”½ å€¤ã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’è¨­å®š
              switch (flight.terminal) {
                case "2":
                  td5.style.color = "#ffffff"; // ç™½
                  td5.style.backgroundColor = "#0082f0"; // é’
                  break;
                case "3":
                  td5.style.color = "#ffffff"; // ç™½
                  td5.style.backgroundColor = "#00afbd"; // ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³
                  break;
                default:
                  td5.style.backgroundColor = "#ffffff"; // ã‚°ãƒ¬ãƒ¼ï¼ˆä¸æ˜ãªå€¤ï¼‰
              }

              tr.appendChild(td1);
              tr.appendChild(td2);
              tr.appendChild(td3);
              tr.appendChild(td4);
              tr.appendChild(td5);

              tbody.appendChild(tr);
            });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å‘¼ã³å‡ºã™
        window.onload = fetchFlights;
    </script>
  </body>
</html>
